<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>생년월일 선택</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
  :root{
    color-scheme: light dark;
  }
  *{ box-sizing:border-box; }

  html,body{
    margin:0;
    padding:0;
  }

  body{
    font-family:-apple-system,BlinkMacSystemFont,"Helvetica Neue",Arial,sans-serif;
    background:#282828;
  }

  /* 전체 화면 */
  .app{
    min-height:100dvh;
    padding-top:env(safe-area-inset-top,0px);
    padding-bottom:env(safe-area-inset-bottom,0px);
    display:flex;
    flex-direction:column;
    align-items:center;
    background:#2f2f33;
  }

  .header{
    width:100%;
    padding:14px 16px;
    text-align:center;
    color:#f9fafb;
    font-size:16px;
    font-weight:600;
  }

  .picker-wrap{
    flex:1;
    width:100%;
    display:flex;
    justify-content:center;
    align-items:center;
  }

  .picker-card{
    width:320px;
    max-width:90%;
    background:#ffffff;
    border-radius:18px;
    padding:24px 18px 30px;
    box-shadow:0 20px 40px rgba(0,0,0,0.35);
    position:relative;
  }

  .picker-title{
    text-align:center;
    margin-bottom:18px;
    font-size:15px;
    color:#4b5563;
  }

    .picker{
    display:flex;
    gap:8px;
    position:relative;
    height:200px;           /* ← 한 컬럼 높이와 동일하게 고정 */
    }


  /* 가운데 선택 영역: top은 JS에서 계산해서 넣음 */
/* 가운데 선택 영역: top을 80px로 고정 */
.picker-highlight{
  position:absolute;
  left:0;
  right:0;
  /* ✨ 이 부분을 수정합니다: 200px 중 가운데(100px)에서 item 높이의 절반(20px)을 뺌 */
  top:80px; 
  transform:none;
  height:40px;
  pointer-events:none;
  border-radius:12px;
  box-shadow:0 0 0 1px #e5e7eb, 0 8px 16px rgba(15,23,42,0.08);
}

  /* 5줄 보이게 (5 × 40 = 200px) */
  .column{
    flex:1;
    position:relative;
    height:200px;
    overflow-y:auto;
    scrollbar-width:none;
    -ms-overflow-style:none;
  }
  .column::-webkit-scrollbar{ display:none; }

  .item{
    height:40px;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:16px;
    color:#d1d5db;
  }

  .item span.number{
    min-width:3ch;
    text-align:right;
    margin-right:3px;
  }
  .item span.unit{
    font-size:13px;
    color:#9ca3af;
  }

  .item.active{
    color:#111827;
    font-weight:700;
  }
  .item.active span.unit{
    color:#4b5563;
  }

  .footer{
    width:100%;
    text-align:center;
    padding:10px 0 16px;
    font-size:12px;
    color:#9ca3af;
  }
</style>
</head>
<body>
<div class="app">

  <div class="header">회원가입</div>

  <div class="picker-wrap">
    <div class="picker-card">
      <div class="picker-title">생년월일 선택</div>
      <div class="picker">
        <!-- ⭐ JS가 이 박스를 항상 가운데 줄에 맞춤 -->
        <div class="picker-highlight" id="highlight"></div>

        <div class="column" id="yearCol"></div>
        <div class="column" id="monthCol"></div>
        <div class="column" id="dayCol"></div>
      </div>
    </div>
  </div>

  <div class="footer">
    가운데 줄에 맞춘 값이 선택된 날짜임
  </div>

</div>

<script>
  const ITEM_HEIGHT = 40;

  const yearCol  = document.getElementById('yearCol');
  const monthCol = document.getElementById('monthCol');
  const dayCol   = document.getElementById('dayCol');

  // 연도 범위는 원하는 대로 수정
  for(let y=1988; y<=2012; y++){
    yearCol.appendChild(makeItem(y, '년'));
  }
  for(let m=1; m<=12; m++){
    monthCol.appendChild(makeItem(m, '월'));
  }
  for(let d=1; d<=31; d++){
    dayCol.appendChild(makeItem(d, '일'));
  }

  function makeItem(num, unit){
    const div = document.createElement('div');
    div.className = 'item';
    const spanNum = document.createElement('span');
    spanNum.className = 'number';
    spanNum.textContent = String(num).padStart(2,'0');
    const spanUnit = document.createElement('span');
    spanUnit.className = 'unit';
    spanUnit.textContent = unit;
    div.appendChild(spanNum);
    div.appendChild(spanUnit);
    return div;
  }

  function setupColumn(col){
    let scrollTimer = null;

    const applyActive = () => {
      const items = [...col.children];

      // 컬럼의 화면상 가운데 y 좌표
      const colRect  = col.getBoundingClientRect();
      const centerY  = colRect.top + colRect.height / 2;

      // 가운데에 가장 가까운 아이템 찾기
      let closestIndex = 0;
      let minDist = Infinity;

      items.forEach((item, idx) => {
        const r = item.getBoundingClientRect();
        const itemCenter = r.top + r.height / 2;
        const dist = Math.abs(itemCenter - centerY);
        if (dist < minDist) {
          minDist = dist;
          closestIndex = idx;
        }
      });

      // 그 아이템이 정확히 가운데 줄에 오도록 스크롤 조정
      const targetTop =
        closestIndex * ITEM_HEIGHT - (col.clientHeight / 2 - ITEM_HEIGHT / 2);

      col.scrollTo({ top: targetTop, behavior: 'smooth' });

      // active 클래스 갱신
      items.forEach((child, i) => {
        child.classList.toggle('active', i === closestIndex);
      });
    };

    col.addEventListener('scroll', () => {
      if (scrollTimer) clearTimeout(scrollTimer);
      scrollTimer = setTimeout(applyActive, 80);
    });

    // 처음 로딩됐을 때 3번째 줄이 가운데 오도록 세팅
    requestAnimationFrame(() => {
      col.scrollTop = ITEM_HEIGHT * 2; // 0,1,2 → 3번째 줄
      applyActive();
    });
  }

  [yearCol, monthCol, dayCol].forEach(setupColumn);
</script>

</body>
</html>
